<!doctype html>
<html>
<head>
    <title>subtitles.efg-ludwigshafen.de</title>

    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"/>

    <style>
        body {
            display: flex;
            flex-direction: column;

            height: 100vh;
            margin: 0;
            padding: .5em;

            box-sizing: border-box;

            background-image: url(data:image/png;base64,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);
            background-size: 5vw;
            background-position: calc(100% - 1vmax) 1vmax;
            background-repeat: no-repeat;
            background-color: #132532;
            color: #fff;

            font-size: 3em;
            font-weight: bold;
            font-family: 'Source Sans Pro', Helvetica, Arial, sans-serif;
            text-shadow: -2px 0 black, 0 2px black, 2px 0 black, 0 -2px black;
        }
        
        nav {
            display: flex;
            flex-direction: row;
        }
        
        #notification {
            width: 100%;
        }

        article {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-around;

            height: 100%;
        }

        #last {
            font-size: .8em;
        }
    </style>
</head>
<body>
    <nav>
        <select id="languages"></select>
        <p id="notification"></p>
    </nav>
    <article id="viewport">
        <section id="last"></section>
        <section id="current"></section>
    </article>
    <script src="/socket.io/socket.io.js"></script>
    <script>
        var $notification = document.getElementById('notification')
            , $languages = document.getElementById('languages')
            , $last = document.getElementById('last')
            , $current = document.getElementById('current')
            
            , languages = {
                af: {name: 'Afrikaans'},
                sq: {name: 'Albanian'},
                ar: {name: 'Arabic', isRtl: true},
                hy: {name: 'Armenian'},
                az: {name: 'Azerbaijani'},
                eu: {name: 'Basque'},
                be: {name: 'Belarusian'},
                bn: {name: 'Bengali'},
                bs: {name: 'Bosnian'},
                bg: {name: 'Bulgarian'},
                ca: {name: 'Catalan'},
                ceb: {name: 'Cebuano'},
                ny: {name: 'Chichewa'},
                'zh-CN': {name: 'Chinese Simplified'},
                'zh-TW': {name: 'Chinese Traditional'},
                hr: {name: 'Croatian'},
                cs: {name: 'Czech'},
                da: {name: 'Danish'},
                nl: {name: 'Dutch'},
                en: {name: 'English'},
                eo: {name: 'Esperanto'},
                et: {name: 'Estonian'},
                tl: {name: 'Filipino'},
                fi: {name: 'Finnish'},
                fr: {name: 'French'},
                gl: {name: 'Galician'},
                ka: {name: 'Georgian'},
                de: {name: 'German'},
                el: {name: 'Greek'},
                gu: {name: 'Gujarati'},
                ht: {name: 'Haitian Creole'},
                ha: {name: 'Hausa'},
                iw: {name: 'Hebrew', isRtl: true},
                hi: {name: 'Hindi'},
                hmn: {name: 'Hmong'},
                hu: {name: 'Hungarian'},
                is: {name: 'Icelandic'},
                ig: {name: 'Igbo'},
                id: {name: 'Indonesian'},
                ga: {name: 'Irish'},
                it: {name: 'Italian'},
                ja: {name: 'Japanese'},
                jw: {name: 'Javanese'},
                kn: {name: 'Kannada'},
                kk: {name: 'Kazakh'},
                km: {name: 'Khmer'},
                ko: {name: 'Korean'},
                lo: {name: 'Lao'},
                la: {name: 'Latin'},
                lv: {name: 'Latvian'},
                lt: {name: 'Lithuanian'},
                mk: {name: 'Macedonian'},
                mg: {name: 'Malagasy'},
                ms: {name: 'Malay'},
                ml: {name: 'Malayalam'},
                mt: {name: 'Maltese'},
                mi: {name: 'Maori'},
                mr: {name: 'Marathi'},
                mn: {name: 'Mongolian'},
                my: {name: 'Myanmar(Burmese)'},
                ne: {name: 'Nepali'},
                no: {name: 'Norwegian'},
                fa: {name: 'Persian', isRtl: true},
                pl: {name: 'Polish'},
                pt: {name: 'Portuguese'},
                ma: {name: 'Punjabi'},
                ro: {name: 'Romanian'},
                ru: {name: 'Russian'},
                sr: {name: 'Serbian'},
                st: {name: 'Sesotho'},
                si: {name: 'Sinhala'},
                sk: {name: 'Slovak'},
                sl: {name: 'Slovenian'},
                so: {name: 'Somali'},
                es: {name: 'Spanish'},
                su: {name: 'Sudanese'},
                sw: {name: 'Swahili'},
                sv: {name: 'Swedish'},
                tg: {name: 'Tajik'},
                ta: {name: 'Tamil'},
                te: {name: 'Telugu'},
                th: {name: 'Thai'},
                tr: {name: 'Turkish'},
                uk: {name: 'Ukrainian'},
                ur: {name: 'Urdu'},
                uz: {name: 'Uzbek'},
                vi: {name: 'Vietnamese'},
                cy: {name: 'Welsh'},
                yi: {name: 'Yiddish'},
                yo: {name: 'Yoruba'},
                zu: {name: 'Zulu'}
            }
            , target = location.pathname.slice(1)

            , socket = io();

        Object.keys(languages).forEach(function(key) {
            var $option = document.createElement('option');

            $option.value = key;
            $option.innerHTML = languages[key].name;
            if (key === target) {
                $option.selected = true;
                document.querySelector('head title').innerHTML = key + ' |Â subtitles.efg-ludwigshafen.de';
            }

            $languages.appendChild($option);
        });

        $languages.addEventListener('change', function(event) {
            location.pathname = '/' + event.target.value;
        });
        if (languages[target].isRtl) {
            $last.dir = 'rtl';
            $current.dir = 'rtl';
        }

        socket.emit('joinrequest', target);

        socket.on('chunk', function(message) {
            $last.innerHTML = $current.innerHTML;
            $current.innerHTML = message;
        });
    </script>
</body>
</html>