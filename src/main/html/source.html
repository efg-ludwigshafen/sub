<!doctype html>
<html>
<head>
    <title>source |Â subtitles.efg-ludwigshafen.de</title>

    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"/>

    <style>
        body {
            display: flex;
            align-items: center;
            justify-content: center;

            height: 100vh;

            background: #132532;
            background-image: url(data:image/png;base64,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);
            background-size: 5vw;
            background-position: calc(100% - 1vmax) 1vmax;
            background-repeat: no-repeat;
        }

        #record {
            display: block;

            height: 20vmin;
            width: 20vmin;

            border: 0 solid #132532;
            border-radius: 100%;

            background: #e85555;
            outline: none;

            box-sizing: content-box;
        }

        #record.active {
            box-shadow: 0 0 0 .5vmin #e85555;
            border-width: .5vmin;
            animation: pulse .5s ease-in-out 1s infinite alternate;
        }

        .error {
            color: #e85555;
            text-shadow: 0 0 1px white;
            font-size: 3em;
        }

        @keyframes pulse {
            0% {
                opacity: 1;
            }
            100% {
                opacity: 0;
            }
        }
    </style>
</head>
<body>
    <button id="record"></button>
    <script src="/socket.io/socket.io.js"></script>
    <script>
        function Recognition() {
            this.recognition = new webkitSpeechRecognition();
            this.recognition.lang = 'de-DE';
            this.recognition.addEventListener('result', function(e) {
                socket.emit('chunk', e.results[0][0].transcript);
                recognition = new Recognition();
                recognition.start();
            });
        }
        Recognition.prototype.start = function() {
            this.recognition.start();
        };
        Recognition.prototype.stop = function() {
            this.recognition.stop();
        };
        
        var socket = io()
            , recognition
            , $record = document.getElementById('record')
            , $message;

        try {
            recognition = new Recognition();

            $record.addEventListener('click', function(event) {
                if ($record.classList.contains('active')) {
                    recognition.stop();
                } else {
                    recognition.start();
                }
                event.target.classList.toggle('active');
            });
        } catch (e) {
            $message = document.createElement('p');
            $message.classList.add('error');
            $message.innerHTML = 'This app supports only Chrome 50+. Please open again there.';
            document.body.replaceChild($record, $message);
        }
    </script>
</body>
</html>